import{_ as Q,$ as K,a0 as z}from"./scheduler.b5a3e11c.js";import{w as V,r as X}from"./index.a374727b.js";function Y(e){const t=e-1;return t*t*t+1}function re(e){const t=Math.cos(e*Math.PI*.5);return Math.abs(t)<1e-14?1:1-t}function se(e){return Math.sin(e*Math.PI/2)}function ae(e,{delay:t=0,duration:o=400,easing:a=K}={}){const f=+getComputedStyle(e).opacity;return{delay:t,duration:o,easing:a,css:p=>`opacity: ${p*f}`}}function ie(e,{delay:t=0,duration:o=400,easing:a=Y,x:f=0,y:p=0,opacity:m=0}={}){const c=getComputedStyle(e),h=+c.opacity,i=c.transform==="none"?"":c.transform,u=h*(1-m),[v,s]=Q(f),[L,E]=Q(p);return{delay:t,duration:o,easing:a,css:(l,n)=>`
			transform: ${i} translate(${(1-l)*v}${s}, ${(1-l)*L}${E});
			opacity: ${h-u*n}`}}const G=V(void 0);function ce(e,t){const{computePosition:o,autoUpdate:a,offset:f,shift:p,flip:m,arrow:c,size:h,autoPlacement:i,hide:u,inline:v}=z(G),s={open:!1,autoUpdateCleanup:()=>{}},L=':is(a[href], button, input, textarea, select, details, [tabindex]):not([tabindex="-1"])';let E;const l="https://www.skeleton.dev/utilities/popups";let n,$;function x(){n=document.querySelector(`[data-popup="${t.target}"]`)??document.createElement("div"),$=n.querySelector(".arrow")??document.createElement("div")}x();function S(){var d,y,U,_,A,D,F,O;if(!n)throw new Error(`The data-popup="${t.target}" element was not found. ${l}`);if(!o)throw new Error(`Floating UI 'computePosition' not found for data-popup="${t.target}". ${l}`);if(!f)throw new Error(`Floating UI 'offset' not found for data-popup="${t.target}". ${l}`);if(!p)throw new Error(`Floating UI 'shift' not found for data-popup="${t.target}". ${l}`);if(!m)throw new Error(`Floating UI 'flip' not found for data-popup="${t.target}". ${l}`);if(!c)throw new Error(`Floating UI 'arrow' not found for data-popup="${t.target}". ${l}`);const r=[];h&&r.push(h((d=t.middleware)==null?void 0:d.size)),i&&r.push(i((y=t.middleware)==null?void 0:y.autoPlacement)),u&&r.push(u((U=t.middleware)==null?void 0:U.hide)),v&&r.push(v((_=t.middleware)==null?void 0:_.inline)),o(e,n,{placement:t.placement??"bottom",middleware:[f(((A=t.middleware)==null?void 0:A.offset)??8),p(((D=t.middleware)==null?void 0:D.shift)??{padding:8}),m((F=t.middleware)==null?void 0:F.flip),c(((O=t.middleware)==null?void 0:O.arrow)??{element:$||null}),...r]}).then(({x:R,y:H,placement:W,middlewareData:B})=>{if(Object.assign(n.style,{left:`${R}px`,top:`${H}px`}),$){const{x:g,y:q}=B.arrow,J={top:"bottom",right:"left",bottom:"top",left:"right"}[W.split("-")[0]];Object.assign($.style,{left:g!=null?`${g}px`:"",top:q!=null?`${q}px`:"",right:"",bottom:"",[J]:"-4px"})}})}function b(){n&&(s.open=!0,t.state&&t.state({state:s.open}),S(),n.style.display="block",n.style.opacity="1",n.style.pointerEvents="auto",n.removeAttribute("inert"),s.autoUpdateCleanup=a(e,n,S),E=Array.from(n==null?void 0:n.querySelectorAll(L)))}function w(r){if(!n)return;const d=parseFloat(window.getComputedStyle(n).transitionDuration.replace("s",""))*1e3;setTimeout(()=>{s.open=!1,t.state&&t.state({state:s.open}),n.style.opacity="0",n.setAttribute("inert",""),s.autoUpdateCleanup&&s.autoUpdateCleanup(),r&&r()},d)}function M(){s.open===!1?b():w()}function k(r){if(s.open===!1||e.contains(r.target))return;if(n&&n.contains(r.target)===!1){w();return}const d=t.closeQuery===void 0?"a[href], button":t.closeQuery,y=n==null?void 0:n.querySelectorAll(d);y==null||y.forEach(U=>{U.contains(r.target)&&w()})}const I=r=>{if(s.open===!1)return;const d=r.key;if(d==="Escape"){r.preventDefault(),e.focus(),w();return}E=Array.from(n==null?void 0:n.querySelectorAll(L)),s.open&&document.activeElement===e&&(d==="ArrowDown"||d==="Tab")&&L.length>0&&E.length>0&&(r.preventDefault(),E[0].focus())};switch(t.event){case"click":e.addEventListener("click",M,!0),window.addEventListener("click",k,!0);break;case"hover":e.addEventListener("mouseover",b,!0),e.addEventListener("mouseleave",()=>w(),!0);break;case"focus-blur":e.addEventListener("focus",M,!0),e.addEventListener("blur",()=>w(),!0);break;case"focus-click":e.addEventListener("focus",b,!0),window.addEventListener("click",k,!0);break;default:throw new Error(`Event value of '${t.event}' is not supported. ${l}`)}return window.addEventListener("keydown",I,!0),S(),{update(r){w(()=>{t=r,S(),x()})},destroy(){e.removeEventListener("click",M,!0),e.removeEventListener("mouseover",b,!0),e.removeEventListener("mouseleave",()=>w(),!0),e.removeEventListener("focus",M,!0),e.removeEventListener("focus",b,!0),e.removeEventListener("blur",()=>w(),!0),window.removeEventListener("click",k,!0),window.removeEventListener("keydown",I,!0)}}}const C={};function T(e){return e==="local"?localStorage:sessionStorage}function P(e,t,o){const a=(o==null?void 0:o.serializer)??JSON,f=(o==null?void 0:o.storage)??"local";function p(m,c){T(f).setItem(m,a.stringify(c))}if(!C[e]){const m=V(t,i=>{const u=T(f).getItem(e);u&&i(a.parse(u));{const v=s=>{s.key===e&&i(s.newValue?a.parse(s.newValue):null)};return window.addEventListener("storage",v),()=>window.removeEventListener("storage",v)}}),{subscribe:c,set:h}=m;C[e]={set(i){p(e,i),h(i)},update(i){const u=i(z(m));p(e,u),h(u)},subscribe:c}}return C[e]}const Z=P("modeOsPrefers",!1),N=P("modeUserPrefers",void 0),ee=P("modeCurrent",!1);function ue(){const e=window.matchMedia("(prefers-color-scheme: light)").matches;return Z.set(e),e}function le(e){N.set(e)}function de(e){const t=document.documentElement.classList,o="dark";e===!0?t.remove(o):t.add(o),ee.set(e)}function fe(){const e=document.documentElement.classList,t=localStorage.getItem("modeUserPrefers")==="false",o=!("modeUserPrefers"in localStorage),a=window.matchMedia("(prefers-color-scheme: dark)").matches;t||o&&a?e.add("dark"):e.remove("dark")}const j="(prefers-reduced-motion: reduce)";function te(){return window.matchMedia(j).matches}const pe=X(te(),e=>{{const t=a=>{e(a.matches)},o=window.matchMedia(j);return o.addEventListener("change",t),()=>{o.removeEventListener("change",t)}}});export{re as a,se as b,ae as c,fe as d,de as e,ie as f,ue as g,le as h,ce as i,P as l,ee as m,pe as p,G as s};
