import{a0 as Q,a1 as K,a2 as z}from"./scheduler.6e9ea0b3.js";import{w as V,r as X}from"./index.08216e47.js";function Y(e){const t=e-1;return t*t*t+1}function re(e,{delay:t=0,duration:n=400,easing:a=K}={}){const f=+getComputedStyle(e).opacity;return{delay:t,duration:n,easing:a,css:p=>`opacity: ${p*f}`}}function se(e,{delay:t=0,duration:n=400,easing:a=Y,x:f=0,y:p=0,opacity:m=0}={}){const c=getComputedStyle(e),v=+c.opacity,i=c.transform==="none"?"":c.transform,u=v*(1-m),[h,s]=Q(f),[L,E]=Q(p);return{delay:t,duration:n,easing:a,css:(l,o)=>`
			transform: ${i} translate(${(1-l)*h}${s}, ${(1-l)*L}${E});
			opacity: ${v-u*o}`}}const G=V(void 0);function ae(e,t){const{computePosition:n,autoUpdate:a,offset:f,shift:p,flip:m,arrow:c,size:v,autoPlacement:i,hide:u,inline:h}=z(G),s={open:!1,autoUpdateCleanup:()=>{}},L=':is(a[href], button, input, textarea, select, details, [tabindex]):not([tabindex="-1"])';let E;const l="https://www.skeleton.dev/utilities/popups";let o,$;function P(){o=document.querySelector(`[data-popup="${t.target}"]`)??document.createElement("div"),$=o.querySelector(".arrow")??document.createElement("div")}P();function S(){var d,y,k,_,I,D,F,O;if(!o)throw new Error(`The data-popup="${t.target}" element was not found. ${l}`);if(!n)throw new Error(`Floating UI 'computePosition' not found for data-popup="${t.target}". ${l}`);if(!f)throw new Error(`Floating UI 'offset' not found for data-popup="${t.target}". ${l}`);if(!p)throw new Error(`Floating UI 'shift' not found for data-popup="${t.target}". ${l}`);if(!m)throw new Error(`Floating UI 'flip' not found for data-popup="${t.target}". ${l}`);if(!c)throw new Error(`Floating UI 'arrow' not found for data-popup="${t.target}". ${l}`);const r=[];v&&r.push(v((d=t.middleware)==null?void 0:d.size)),i&&r.push(i((y=t.middleware)==null?void 0:y.autoPlacement)),u&&r.push(u((k=t.middleware)==null?void 0:k.hide)),h&&r.push(h((_=t.middleware)==null?void 0:_.inline)),n(e,o,{placement:t.placement??"bottom",middleware:[f(((I=t.middleware)==null?void 0:I.offset)??8),p(((D=t.middleware)==null?void 0:D.shift)??{padding:8}),m((F=t.middleware)==null?void 0:F.flip),c(((O=t.middleware)==null?void 0:O.arrow)??{element:$||null}),...r]}).then(({x:R,y:H,placement:W,middlewareData:B})=>{if(Object.assign(o.style,{left:`${R}px`,top:`${H}px`}),$){const{x:g,y:q}=B.arrow,J={top:"bottom",right:"left",bottom:"top",left:"right"}[W.split("-")[0]];Object.assign($.style,{left:g!=null?`${g}px`:"",top:q!=null?`${q}px`:"",right:"",bottom:"",[J]:"-4px"})}})}function b(){o&&(s.open=!0,t.state&&t.state({state:s.open}),S(),o.style.display="block",o.style.opacity="1",o.style.pointerEvents="auto",o.removeAttribute("inert"),s.autoUpdateCleanup=a(e,o,S),E=Array.from(o==null?void 0:o.querySelectorAll(L)))}function w(r){if(!o)return;const d=parseFloat(window.getComputedStyle(o).transitionDuration.replace("s",""))*1e3;setTimeout(()=>{s.open=!1,t.state&&t.state({state:s.open}),o.style.opacity="0",o.setAttribute("inert",""),s.autoUpdateCleanup&&s.autoUpdateCleanup(),r&&r()},d)}function U(){s.open===!1?b():w()}function M(r){if(s.open===!1||e.contains(r.target))return;if(o&&o.contains(r.target)===!1){w();return}const d=t.closeQuery===void 0?"a[href], button":t.closeQuery,y=o==null?void 0:o.querySelectorAll(d);y==null||y.forEach(k=>{k.contains(r.target)&&w()})}const A=r=>{if(s.open===!1)return;const d=r.key;if(d==="Escape"){r.preventDefault(),e.focus(),w();return}E=Array.from(o==null?void 0:o.querySelectorAll(L)),s.open&&document.activeElement===e&&(d==="ArrowDown"||d==="Tab")&&L.length>0&&E.length>0&&(r.preventDefault(),E[0].focus())};switch(t.event){case"click":e.addEventListener("click",U,!0),window.addEventListener("click",M,!0);break;case"hover":e.addEventListener("mouseover",b,!0),e.addEventListener("mouseleave",()=>w(),!0);break;case"focus-blur":e.addEventListener("focus",U,!0),e.addEventListener("blur",()=>w(),!0);break;case"focus-click":e.addEventListener("focus",b,!0),window.addEventListener("click",M,!0);break;default:throw new Error(`Event value of '${t.event}' is not supported. ${l}`)}return window.addEventListener("keydown",A,!0),S(),{update(r){w(()=>{t=r,S(),P()})},destroy(){e.removeEventListener("click",U,!0),e.removeEventListener("mouseover",b,!0),e.removeEventListener("mouseleave",()=>w(),!0),e.removeEventListener("focus",U,!0),e.removeEventListener("focus",b,!0),e.removeEventListener("blur",()=>w(),!0),window.removeEventListener("click",M,!0),window.removeEventListener("keydown",A,!0)}}}const C={};function T(e){return e==="local"?localStorage:sessionStorage}function x(e,t,n){const a=(n==null?void 0:n.serializer)??JSON,f=(n==null?void 0:n.storage)??"local";function p(m,c){T(f).setItem(m,a.stringify(c))}if(!C[e]){const m=V(t,i=>{const u=T(f).getItem(e);u&&i(a.parse(u));{const h=s=>{s.key===e&&i(s.newValue?a.parse(s.newValue):null)};return window.addEventListener("storage",h),()=>window.removeEventListener("storage",h)}}),{subscribe:c,set:v}=m;C[e]={set(i){p(e,i),v(i)},update(i){const u=i(z(m));p(e,u),v(u)},subscribe:c}}return C[e]}const Z=x("modeOsPrefers",!1),N=x("modeUserPrefers",void 0),ee=x("modeCurrent",!1);function ie(){const e=window.matchMedia("(prefers-color-scheme: light)").matches;return Z.set(e),e}function ce(e){N.set(e)}function ue(e){const t=document.documentElement.classList,n="dark";e===!0?t.remove(n):t.add(n),ee.set(e)}function le(){const e=document.documentElement.classList,t=localStorage.getItem("modeUserPrefers")==="false",n=!("modeUserPrefers"in localStorage),a=window.matchMedia("(prefers-color-scheme: dark)").matches;t||n&&a?e.add("dark"):e.remove("dark")}const j="(prefers-reduced-motion: reduce)";function te(){return window.matchMedia(j).matches}const de=X(te(),e=>{{const t=a=>{e(a.matches)},n=window.matchMedia(j);return n.addEventListener("change",t),()=>{n.removeEventListener("change",t)}}});export{re as a,le as b,ue as c,ce as d,ae as e,se as f,ie as g,x as l,ee as m,de as p,G as s};
